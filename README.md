# Project Structure

```
project-root/
├── sites/                  # Directory containing Laravel/WordPress projects generated by the script (one folder per site)
├── docker/                 # Docker configuration directory
│   ├── nginx/
│   │   └── conf.d/         # Generated nginx config files for each site (*.conf)
│   ├── mysql/              # MySQL Docker setup
│   └── php/                # PHP Docker setup
├── certs/                  # Generated SSL certificates for each site (if SSL enabled)
├── bash-scripts/           # Bash scripts for automation (see below)
├── cloudflare/             # Cloudflare Tunnel configuration (if needed)
├── docs/                   # Documentation
├── docker-compose.yml      # Generated by script based on config.json
├── .env                    # Generated by script based on config.json
├── config.json             # Main configuration file for all scripts
├── main.sh                 # Main interactive script for project setup/management
├── .gitignore              # Git ignore file
├── README.md               # Project description and setup instructions
└── LICENSE                 # Project license file
```

## main.sh Workflow

The `main.sh` script is the entry point for managing this project. It provides an interactive menu to:
- Add a new Laravel/WordPress/Existing project (creates folder in `sites/`, updates config, generates SSL certs if needed)
- Build Docker containers
- Initialize databases
- Run migrations inside containers
- Check required applications (installs if missing)
- Generate `.env` file from `config.json`
- Generate `docker-compose.yml` from `config.json`
- Generate nginx config files for all sites in `docker/nginx/conf.d/`

All generated files/folders:
- `sites/<site_name>/` (project code, created by add site)
- `certs/` (SSL certificates, if enabled)
- `docker/nginx/conf.d/*.conf` (nginx configs per site)
- `.env` (environment variables for Docker, generated from config)
- `docker-compose.yml` (generated from config)

## Adding a New Site

Run `main.sh` and select "Add New Site". The script will:
- Prompt for site name, DNS, DB info, public folder, SSL, PHP version, and install type (Laravel/WordPress/GitHub)
- Create the site folder in `sites/`
- Optionally generate SSL certs in `certs/`
- Update `config.json` with the new site
- Install the selected application (Laravel, WordPress, or clone from GitHub)

## Generated/Managed Files and Folders
- `sites/` (all site code, should not be versioned)
- `certs/` (SSL certs, should not be versioned)
- `docker/nginx/conf.d/` (nginx configs, should not be versioned)
- `.env` (should not be versioned)
- `docker-compose.yml` (should not be versioned)

## Example Usage

- To add a new site, run:
  ```
  ./main.sh
  ```
  and follow the interactive menu.

- To build and start containers:
  ```
  docker-compose up -d --build
  ```

- To stop containers:
  ```
  docker-compose down
  ```

- To check logs:
  ```
  docker logs <container_name>
  ```

- To open a shell in a container:
  ```
  docker exec -it <container_name> bash
  ```

- To manually initialize databases:
  ```
  docker exec -it <mysql_container> bash /init.sh
  ```

## Requirements
- Docker, docker-compose, jq, fzf, composer, git, curl, wget, ufw, cloudflared

## See bash-scripts/ for all helper scripts used by main.sh

```

```

```
